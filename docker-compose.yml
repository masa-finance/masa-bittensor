services:
  # Validator for Subnet 42
  validator:
    image: masaengineering/masa-bittensor:${TAG:-latest}
    environment:
      - ROLE=validator
      - NETWORK=${NETWORK:-test}
      - COLDKEY_PASSWORD=${COLDKEY_PASSWORD:-your_coldkey_password}
      - HOTKEY_PASSWORD=${HOTKEY_PASSWORD:-your_hotkey_password}
    ports:
      - "${VALIDATOR_PORT:-8092}:8092"
      - "${VALIDATOR_METRICS_PORT:-8000}:8000"
    volumes:
      - validator_data:/root/.bittensor
    networks:
      - masa_network
    deploy:
      mode: replicated
      replicas: ${VALIDATOR_COUNT:-1}

volumes:
  validator_data:

networks:
  masa_network:
    driver: overlay
